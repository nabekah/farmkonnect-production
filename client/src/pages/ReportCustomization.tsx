import React, { useState } from 'react';\nimport { ChevronDown, Plus, X, Eye, Download, Save } from 'lucide-react';\n\ninterface ReportSection {\n  id: string;\n  name: string;\n  enabled: boolean;\n  order: number;\n}\n\ninterface CustomReport {\n  name: string;\n  type: 'summary' | 'detailed' | 'comparative' | 'forecast' | 'budget';\n  format: 'pdf' | 'excel' | 'csv' | 'json';\n  sections: ReportSection[];\n  includeCharts: boolean;\n  includeComparisons: boolean;\n  dateRange: 'week' | 'month' | 'quarter' | 'year' | 'custom';\n  startDate?: string;\n  endDate?: string;\n}\n\nconst availableSections = [\n  { id: 'overview', name: 'Overview & Summary', description: 'High-level financial summary' },\n  { id: 'revenue', name: 'Revenue Analysis', description: 'Detailed revenue breakdown' },\n  { id: 'expenses', name: 'Expense Details', description: 'Expense categories and trends' },\n  { id: 'budget', name: 'Budget Variance', description: 'Budget vs actual analysis' },\n  { id: 'trends', name: 'Trends & Forecasts', description: 'Historical trends and predictions' },\n  { id: 'charts', name: 'Charts & Visualizations', description: 'Graphical data representations' },\n  { id: 'comparisons', name: 'Period Comparisons', description: 'Year-over-year or period comparisons' },\n  { id: 'alerts', name: 'Alerts & Insights', description: 'Key alerts and recommendations' },\n];\n\nconst ReportCustomization: React.FC = () => {\n  const [report, setReport] = useState<CustomReport>({\n    name: 'Custom Financial Report',\n    type: 'detailed',\n    format: 'pdf',\n    sections: availableSections.slice(0, 4).map((s, i) => ({\n      id: s.id,\n      name: s.name,\n      enabled: true,\n      order: i,\n    })),\n    includeCharts: true,\n    includeComparisons: true,\n    dateRange: 'month',\n  });\n\n  const [showPreview, setShowPreview] = useState(false);\n  const [draggedSection, setDraggedSection] = useState<string | null>(null);\n\n  const handleAddSection = (sectionId: string) => {\n    const section = availableSections.find((s) => s.id === sectionId);\n    if (section && !report.sections.find((s) => s.id === sectionId)) {\n      setReport({\n        ...report,\n        sections: [\n          ...report.sections,\n          {\n            id: sectionId,\n            name: section.name,\n            enabled: true,\n            order: report.sections.length,\n          },\n        ],\n      });\n    }\n  };\n\n  const handleRemoveSection = (sectionId: string) => {\n    setReport({\n      ...report,\n      sections: report.sections.filter((s) => s.id !== sectionId),\n    });\n  };\n\n  const handleToggleSection = (sectionId: string) => {\n    setReport({\n      ...report,\n      sections: report.sections.map((s) =>\n        s.id === sectionId ? { ...s, enabled: !s.enabled } : s\n      ),\n    });\n  };\n\n  const handleDragStart = (sectionId: string) => {\n    setDraggedSection(sectionId);\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n  };\n\n  const handleDrop = (targetSectionId: string) => {\n    if (!draggedSection || draggedSection === targetSectionId) return;\n\n    const draggedIndex = report.sections.findIndex((s) => s.id === draggedSection);\n    const targetIndex = report.sections.findIndex((s) => s.id === targetSectionId);\n\n    const newSections = [...report.sections];\n    [newSections[draggedIndex], newSections[targetIndex]] = [newSections[targetIndex], newSections[draggedIndex]];\n\n    setReport({\n      ...report,\n      sections: newSections.map((s, i) => ({ ...s, order: i })),\n    });\n    setDraggedSection(null);\n  };\n\n  const enabledSections = report.sections.filter((s) => s.enabled);\n  const availableToAdd = availableSections.filter((s) => !report.sections.find((rs) => rs.id === s.id));\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Report Customization</h1>\n          <p className=\"text-gray-600 mt-2\">Create and customize your financial reports</p>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Main Editor */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* Report Settings */}\n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\n              <h2 className=\"text-lg font-semibold mb-4\">Report Settings</h2>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Report Name</label>\n                  <input\n                    type=\"text\"\n                    value={report.name}\n                    onChange={(e) => setReport({ ...report, name: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Report Type</label>\n                    <select\n                      value={report.type}\n                      onChange={(e) => setReport({ ...report, type: e.target.value as any })}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"summary\">Summary</option>\n                      <option value=\"detailed\">Detailed</option>\n                      <option value=\"comparative\">Comparative</option>\n                      <option value=\"forecast\">Forecast</option>\n                      <option value=\"budget\">Budget</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Export Format</label>\n                    <select\n                      value={report.format}\n                      onChange={(e) => setReport({ ...report, format: e.target.value as any })}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"pdf\">PDF</option>\n                      <option value=\"excel\">Excel</option>\n                      <option value=\"csv\">CSV</option>\n                      <option value=\"json\">JSON</option>\n                    </select>\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Date Range</label>\n                  <select\n                    value={report.dateRange}\n                    onChange={(e) => setReport({ ...report, dateRange: e.target.value as any })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"week\">Last Week</option>\n                    <option value=\"month\">Last Month</option>\n                    <option value=\"quarter\">Last Quarter</option>\n                    <option value=\"year\">Last Year</option>\n                    <option value=\"custom\">Custom Range</option>\n                  </select>\n                </div>\n                <div className=\"flex gap-4\">\n                  <label className=\"flex items-center gap-2\">\n                    <input\n                      type=\"checkbox\"\n                      checked={report.includeCharts}\n                      onChange={(e) => setReport({ ...report, includeCharts: e.target.checked })}\n                      className=\"w-4 h-4 rounded border-gray-300\"\n                    />\n                    <span className=\"text-sm text-gray-700\">Include Charts</span>\n                  </label>\n                  <label className=\"flex items-center gap-2\">\n                    <input\n                      type=\"checkbox\"\n                      checked={report.includeComparisons}\n                      onChange={(e) => setReport({ ...report, includeComparisons: e.target.checked })}\n                      className=\"w-4 h-4 rounded border-gray-300\"\n                    />\n                    <span className=\"text-sm text-gray-700\">Include Comparisons</span>\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            {/* Sections Editor */}\n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\n              <h2 className=\"text-lg font-semibold mb-4\">Report Sections</h2>\n              <p className=\"text-sm text-gray-600 mb-4\">Drag to reorder sections</p>\n\n              <div className=\"space-y-2 mb-6\">\n                {report.sections.map((section) => (\n                  <div\n                    key={section.id}\n                    draggable\n                    onDragStart={() => handleDragStart(section.id)}\n                    onDragOver={handleDragOver}\n                    onDrop={() => handleDrop(section.id)}\n                    className={`flex items-center gap-3 p-4 border rounded-lg cursor-move transition-all ${\n                      draggedSection === section.id\n                        ? 'bg-blue-50 border-blue-300'\n                        : 'bg-gray-50 border-gray-200 hover:bg-gray-100'\n                    }`}\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={section.enabled}\n                      onChange={() => handleToggleSection(section.id)}\n                      className=\"w-4 h-4 rounded border-gray-300\"\n                    />\n                    <div className=\"flex-1\">\n                      <p className=\"font-medium text-gray-900\">{section.name}</p>\n                    </div>\n                    <button\n                      onClick={() => handleRemoveSection(section.id)}\n                      className=\"p-2 hover:bg-red-100 rounded-lg transition-colors\"\n                    >\n                      <X size={18} className=\"text-red-600\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n\n              {availableToAdd.length > 0 && (\n                <div className=\"border-t pt-4\">\n                  <p className=\"text-sm font-medium text-gray-700 mb-3\">Add More Sections</p>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    {availableToAdd.map((section) => (\n                      <button\n                        key={section.id}\n                        onClick={() => handleAddSection(section.id)}\n                        className=\"flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-left\"\n                      >\n                        <Plus size={16} className=\"text-gray-600\" />\n                        <span className=\"text-sm text-gray-700\">{section.name}</span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Preview & Actions */}\n          <div className=\"space-y-6\">\n            {/* Preview */}\n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\n              <h2 className=\"text-lg font-semibold mb-4\">Preview</h2>\n              <div className=\"bg-gray-100 rounded-lg p-4 mb-4 min-h-64\">\n                <div className=\"text-sm text-gray-600\">\n                  <p className=\"font-semibold text-gray-900 mb-2\">{report.name}</p>\n                  <p className=\"text-xs mb-3\">Type: {report.type}</p>\n                  <p className=\"text-xs mb-3\">Format: {report.format.toUpperCase()}</p>\n                  <p className=\"text-xs mb-4\">Sections: {enabledSections.length}</p>\n                  <div className=\"space-y-1 text-xs\">\n                    {enabledSections.map((s) => (\n                      <p key={s.id} className=\"text-gray-700\">â€¢ {s.name}</p>\n                    ))}\n                  </div>\n                </div>\n              </div>\n              <button\n                onClick={() => setShowPreview(!showPreview)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center justify-center gap-2 transition-colors\"\n              >\n                <Eye size={18} />\n                Full Preview\n              </button>\n            </div>\n\n            {/* Actions */}\n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 space-y-3\">\n              <button className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center gap-2 transition-colors\">\n                <Download size={18} />\n                Generate Report\n              </button>\n              <button className=\"w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium flex items-center justify-center gap-2 transition-colors\">\n                <Save size={18} />\n                Save as Template\n              </button>\n            </div>\n\n            {/* Stats */}\n            <div className=\"bg-blue-50 rounded-lg p-4 border border-blue-200\">\n              <p className=\"text-sm font-medium text-blue-900 mb-3\">Report Summary</p>\n              <div className=\"space-y-2 text-sm text-blue-800\">\n                <p>Sections: {enabledSections.length}</p>\n                <p>Format: {report.format.toUpperCase()}</p>\n                <p>Estimated Size: ~{Math.floor(Math.random() * 5) + 2}MB</p>\n                <p>Generation Time: ~{Math.floor(Math.random() * 30) + 10}s</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportCustomization;\n
