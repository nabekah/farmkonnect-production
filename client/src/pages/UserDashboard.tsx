import { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { AlertCircle, TrendingUp, Droplets, Bug, Leaf, Calendar, Bell, Settings } from 'lucide-react';\n\nexport interface DashboardMetric {\n  label: string;\n  value: string | number;\n  change?: number;\n  icon: React.ReactNode;\n  color: string;\n}\n\nexport interface DashboardRecommendation {\n  id: string;\n  title: string;\n  description: string;\n  priority: 'low' | 'medium' | 'high' | 'urgent';\n  action: string;\n  createdAt: number;\n}\n\nexport interface DashboardAlert {\n  id: string;\n  title: string;\n  message: string;\n  type: 'info' | 'warning' | 'error';\n  timestamp: number;\n  read: boolean;\n}\n\nexport interface DashboardData {\n  userId: string;\n  farmCount: number;\n  activeAlerts: number;\n  pendingTasks: number;\n  metrics: DashboardMetric[];\n  recommendations: DashboardRecommendation[];\n  alerts: DashboardAlert[];\n  recentActivity: Array<{ action: string; timestamp: number; details: string }>;\n}\n\n/**\n * User Dashboard Component\n */\nexport function UserDashboard() {\n  const [dashboardData, setDashboardData] = useState<DashboardData>({\n    userId: 'user-1',\n    farmCount: 3,\n    activeAlerts: 5,\n    pendingTasks: 12,\n    metrics: [\n      {\n        label: 'Total Farms',\n        value: 3,\n        change: 0,\n        icon: <Leaf className=\"w-5 h-5\" />,\n        color: 'text-green-600',\n      },\n      {\n        label: 'Soil Moisture',\n        value: '65%',\n        change: 5,\n        icon: <Droplets className=\"w-5 h-5\" />,\n        color: 'text-blue-600',\n      },\n      {\n        label: 'Pest Incidents',\n        value: 2,\n        change: -1,\n        icon: <Bug className=\"w-5 h-5\" />,\n        color: 'text-red-600',\n      },\n      {\n        label: 'Yield Forecast',\n        value: '95 units',\n        change: 8,\n        icon: <TrendingUp className=\"w-5 h-5\" />,\n        color: 'text-purple-600',\n      },\n    ],\n    recommendations: [\n      {\n        id: 'rec-1',\n        title: 'Increase Irrigation',\n        description: 'Soil moisture is below optimal level',\n        priority: 'high',\n        action: 'Increase irrigation frequency to 3 times daily',\n        createdAt: Date.now() - 3600000,\n      },\n      {\n        id: 'rec-2',\n        title: 'Implement Pest Control',\n        description: 'Pest incidents detected above threshold',\n        priority: 'urgent',\n        action: 'Apply integrated pest management protocol',\n        createdAt: Date.now() - 7200000,\n      },\n      {\n        id: 'rec-3',\n        title: 'Optimal Harvest Window',\n        description: 'Weather conditions are ideal for harvesting',\n        priority: 'medium',\n        action: 'Schedule harvest within next 3-5 days',\n        createdAt: Date.now() - 86400000,\n      },\n    ],\n    alerts: [\n      {\n        id: 'alert-1',\n        title: 'High Temperature',\n        message: 'Temperature exceeded 35Â°C in Farm A',\n        type: 'warning',\n        timestamp: Date.now() - 1800000,\n        read: false,\n      },\n      {\n        id: 'alert-2',\n        title: 'Low Soil Moisture',\n        message: 'Soil moisture dropped below 30% in Farm B',\n        type: 'warning',\n        timestamp: Date.now() - 3600000,\n        read: false,\n      },\n      {\n        id: 'alert-3',\n        title: 'Device Offline',\n        message: 'Sensor in Farm C is offline',\n        type: 'error',\n        timestamp: Date.now() - 7200000,\n        read: true,\n      },\n    ],\n    recentActivity: [\n      { action: 'Report Generated', timestamp: Date.now() - 3600000, details: 'Weekly farm report' },\n      { action: 'Recommendation Created', timestamp: Date.now() - 7200000, details: 'Irrigation optimization' },\n      { action: 'Alert Triggered', timestamp: Date.now() - 10800000, details: 'High temperature' },\n    ],\n  });\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'urgent':\n        return 'bg-red-50 border-red-200';\n      case 'high':\n        return 'bg-orange-50 border-orange-200';\n      case 'medium':\n        return 'bg-yellow-50 border-yellow-200';\n      default:\n        return 'bg-blue-50 border-blue-200';\n    }\n  };\n\n  const getAlertColor = (type: string) => {\n    switch (type) {\n      case 'error':\n        return 'bg-red-50 border-red-200';\n      case 'warning':\n        return 'bg-yellow-50 border-yellow-200';\n      default:\n        return 'bg-blue-50 border-blue-200';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-8\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex justify-between items-center mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard</h1>\n            <p className=\"text-gray-600 mt-2\">Welcome back! Here's your farm overview.</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <button className=\"p-2 hover:bg-gray-200 rounded-lg\">\n              <Bell className=\"w-6 h-6\" />\n            </button>\n            <button className=\"p-2 hover:bg-gray-200 rounded-lg\">\n              <Settings className=\"w-6 h-6\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Metrics Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n          {dashboardData.metrics.map((metric, index) => (\n            <Card key={index}>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-600\">{metric.label}</p>\n                    <p className=\"text-2xl font-bold mt-2\">{metric.value}</p>\n                    {metric.change !== undefined && (\n                      <p className={`text-sm mt-2 ${metric.change >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                        {metric.change >= 0 ? '+' : ''}{metric.change}% from last week\n                      </p>\n                    )}\n                  </div>\n                  <div className={`p-3 bg-gray-100 rounded-lg ${metric.color}`}>{metric.icon}</div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n\n        {/* Main Content Grid */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Recommendations */}\n          <div className=\"lg:col-span-2\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Recommendations</CardTitle>\n                <CardDescription>AI-powered suggestions for your farms</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {dashboardData.recommendations.map((rec) => (\n                  <div key={rec.id} className={`p-4 border rounded-lg ${getPriorityColor(rec.priority)}`}>\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-gray-900\">{rec.title}</h3>\n                        <p className=\"text-sm text-gray-600 mt-1\">{rec.description}</p>\n                        <p className=\"text-sm font-medium text-gray-700 mt-2\">{rec.action}</p>\n                      </div>\n                      <span\n                        className={`px-2 py-1 text-xs font-semibold rounded ${\n                          rec.priority === 'urgent'\n                            ? 'bg-red-200 text-red-800'\n                            : rec.priority === 'high'\n                            ? 'bg-orange-200 text-orange-800'\n                            : rec.priority === 'medium'\n                            ? 'bg-yellow-200 text-yellow-800'\n                            : 'bg-blue-200 text-blue-800'\n                        }`}\n                      >\n                        {rec.priority.charAt(0).toUpperCase() + rec.priority.slice(1)}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Alerts */}\n          <div>\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <AlertCircle className=\"w-5 h-5\" />\n                  Alerts\n                </CardTitle>\n                <CardDescription>{dashboardData.activeAlerts} active alerts</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                {dashboardData.alerts.map((alert) => (\n                  <div key={alert.id} className={`p-3 border rounded-lg ${getAlertColor(alert.type)}`}>\n                    <div className=\"flex items-start gap-2\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-semibold text-sm text-gray-900\">{alert.title}</h4>\n                        <p className=\"text-xs text-gray-600 mt-1\">{alert.message}</p>\n                        <p className=\"text-xs text-gray-500 mt-2\">\n                          {new Date(alert.timestamp).toLocaleTimeString()}\n                        </p>\n                      </div>\n                      {!alert.read && <div className=\"w-2 h-2 bg-red-500 rounded-full mt-1\" />}\n                    </div>\n                  </div>\n                ))}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        {/* Recent Activity */}\n        <Card className=\"mt-8\">\n          <CardHeader>\n            <CardTitle>Recent Activity</CardTitle>\n            <CardDescription>Your recent farm activities</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {dashboardData.recentActivity.map((activity, index) => (\n                <div key={index} className=\"flex items-center gap-4 pb-4 border-b last:border-b-0\">\n                  <div className=\"w-2 h-2 bg-blue-500 rounded-full\" />\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-gray-900\">{activity.action}</p>\n                    <p className=\"text-sm text-gray-600\">{activity.details}</p>\n                  </div>\n                  <p className=\"text-sm text-gray-500\">{new Date(activity.timestamp).toLocaleTimeString()}</p>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n
